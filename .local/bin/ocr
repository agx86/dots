#!/bin/bash
# Dependencies: tesseract-ocr imagemagick maim xsel

IMG=`mktemp`
trap "rm $IMG*" EXIT

maim -s --nodrag --quality=10 $IMG.png

mogrify -modulate 100,0 -resize 400% $IMG.png

tesseract $IMG.png $IMG &> /dev/null

if [ -f "$IMG.txt" ]; then
    cat $IMG.txt | xsel -bi
    notify-send "Text copied" "$(cat $IMG.txt)"
fi

exit

